;********************************
; PALETTE_VBLANK.S
;********************************
;	Author:	Emory Georges
;	(c)2000	Interactive Imagination
;	All rights reserved

;********************************
?VBLANK_UPDATE_PALETTE_BG
	LD		HL,ANIM_PAL_BG_BUFFER
	LD		A,%10000000
	LD		(BCPS),A
	;LD		B,64				;64=4COLORS*2BYTE*8PALETTES -always copies 8 palettes
	LD		C,BCPD&$00FF
	
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	RET

;********************************
?VBLANK_UPDATE_PALETTE_OBJ
	LD		HL,ANIM_PAL_OBJ_BUFFER
	LD		A,%10000000
	LD		(OCPS),A
	;LD		B,64				;64=4COLORS*2BYTE*8PALETTES
	LD		C,OCPD&$00FF
	
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	UNROLL_LOOP_CPY_PAL
	RET

?VBLANK_UPDATE_PALETTES
	CALL		?VBLANK_UPDATE_PALETTE_BG
	CALL		?VBLANK_UPDATE_PALETTE_OBJ
	MOVADDR		VBLANK_FUNC,?VBLANK_IDLE
	RET
	
;********************************
	END
;********************************