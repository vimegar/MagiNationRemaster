;********************************
; BATTLE_EQU.S
;********************************
;	Author:	Patrick Meehan,Emory Georges,Dylan "Worveline" Mayo
;	(c)2000	Interactive Imagination
;	All rights reserved

		
;********************************
		LIB		SOURCE\GAME\BATTLE\BATTLEAI\BATTLE_AI_EQU.S
		LIB		SOURCE\GAME\BATTLE\COMMANDS\BTLCMD_EQU.S
		
;********************************
;BATTLE NUM FONT EQUS
;********************************		
BTL_FONT_BLANK		EQU		$00
BTL_0				EQU		$01
BTL_1				EQU		$02
BTL_2				EQU		$03
BTL_3				EQU		$04
BTL_4				EQU		$05
BTL_5				EQU		$06
BTL_6				EQU		$07
BTL_7				EQU		$08
BTL_8				EQU		$09
BTL_9				EQU		$0A		

;********************************
;BATTLE MAGI ANIM EQUS
;********************************		
STAND_ANIM			EQU		$00
TAUNT_ANIM			EQU		$01
SUMMON_ANIM			EQU		$02
WIN_ANIM			EQU		$03
LOSE_ANIM			EQU		$04
FOCUS_ANIM			EQU		$05
WAIT_ANIM			EQU		$06
		
;********************************
;ACTOR EFFECTS CODES
;********************************		
BTL_SUMMON_SPARKLE	EQU		$01

;********************************
;OVERRIDE CODES
;********************************		
BTL_OVERRIDE_DAM	EQU		$01
BTL_OVERRIDE_NODAM	EQU		$02
		
;********************************
;REDIRECTION CODES
;********************************
BTL_DEAD_REDIRECT	EQU		$00
BTL_DIVERT_REDIRECT	EQU		$01
		
;********************************
;EXIT CODES
;********************************
BTL_NO_EXIT			EQU		$00
BTL_EXIT_RUN		EQU		$01
BTL_EXIT_WIN		EQU		$02
BTL_EXIT_LOSE		EQU		$03
BTL_EXIT_DRAW		EQU		$04

;********************************
;USED RING CODES
;********************************
BTL_RING_UNUSED		EQU		$00		;NOT USED AT ALL THIS BATTLE
BTL_RING_USED		EQU		$01		;USED AT SOME POINT THIS BATTLE
BTL_RING_INUSE		EQU		$02		;IN USE RIGHT THIS MINUTE IN BATTLE
	
;********************************
; TEAMS
;********************************
BTL_TEAM_HERO		EQU		$00
BTL_TEAM_ENEMY		EQU		$01

BTL_ID_HERO			EQU		$00
BTL_ID_ALLY0		EQU		$01
BTL_ID_ALLY1		EQU		$02
BTL_ID_ALLY2		EQU		$03
BTL_ID_ALLY3		EQU		$04
BTL_ID_ENEMY0		EQU		$05
BTL_ID_ENEMY1		EQU		$06
BTL_ID_ENEMY2		EQU		$07
BTL_ID_ENEMY3		EQU		$08
BTL_ID_MAGI			EQU		$09

BTL_ID_PTR_ACTOR	EQU		$0A
BTL_ID_HERO_ACTOR	EQU		$0B
BTL_ID_MAGI_ACTOR	EQU		$0C

;********************************
;BUFFER POSITIONS
;********************************
BTL_BUFFER_ENERGY	EQU		22
BTL_BUFFER_TARGET	EQU		11

;********************************
;ELEMENTAL BITS
;********************************
STANDARD			EQU		$00;NONE
EARTH				EQU		$01;$00
FIRE				EQU		$02;$01
WIND				EQU		$04;$02
WATER				EQU		$08;$03
LIFE				EQU  	$10;$04
SHADOW				EQU		$20;$05
LIGHTNING			EQU		$40;$06
INCONVENIENCE		EQU		$80;$07

;********************************
; STATUS AILMENTS	
;********************************
PLAGUE				EQU		$01 ;$00		; Drains energy, cured by fire attacks
STONE				EQU		$02 ;$01		; Disables creature, vulnerable only to earth; earth is instant death
HICCUP				EQU		$04 ;$02		; Randomly skip turns, cured by water attacks
ERUPT				EQU		$08 ;$03		; Count down and explode, damaging allies
HIDDEN				EQU		$10 ;$04		; Cured by any successful attack
MIRROR				EQU		$20 ;$05		; If hit when hidden + mirror, instant death
CONFUSED			EQU		$40 ;$06		; Attacks members of own team
DIVERT				EQU		$80 ;$07		; Divert all attacks (except blanket attacks) to allies

;********************************
; STRING EQUS
;********************************
BTL_ITEM_VRAM1		EQU		$8860
BTL_ITEM_BG1		EQU		$9C02
BTL_ITEM_QUAN_VRAM1	EQU		$8C70
BTL_ITEM_QUAN_BG1	EQU		$9C10
BTL_NUMBOUNCE_START	EQU		$8FD0
BTL_STAT_LBL_LEN	EQU		8
BTL_STATUS_LBL_LEN	EQU		9

;********************************
;COMBAT EQUS
;********************************
BTL_NORM_HIT_CHANCE	EQU		$F0
BTL_HIDDEN_HIT_CHANCE	EQU	$4C

CREATURE_XRAM_SIZE			EQU		39
CREATURE_NAME_SIZE			EQU		10
CREATURE_BTL_SIZE			EQU		2+CREATURE_XRAM_SIZE+BTL_CMD_SIZE ;2 (COUNTER,TEAM) 16(BTL_CMD)

;-------------------------------------------
; creature table
CREATURE_STAT_TEMPLATE_SIZE		EQU		11
CREATURE_FLAV_TEMPLATE_SIZE		EQU		9
CREATURE_CMD_TEMPLATE_SIZE		EQU		12
CREATURE_GFX_TEMPLATE_SIZE		EQU		11
CREATURE_CARD_TEMPLATE_SIZE		EQU		4
CREATURE_TEMPLATE_SIZE			EQU		CREATURE_STAT_TEMPLATE_SIZE + CREATURE_FLAV_TEMPLATE_SIZE + CREATURE_CMD_TEMPLATE_SIZE + CREATURE_GFX_TEMPLATE_SIZE + CREATURE_CARD_TEMPLATE_SIZE
;-------------------------------------------

CREATURE_STAT_OFFSET			EQU		0
CREATURE_FLAV_OFFSET			EQU		CREATURE_STAT_TEMPLATE_SIZE
CREATURE_CMD_OFFSET				EQU		CREATURE_STAT_TEMPLATE_SIZE+CREATURE_FLAV_TEMPLATE_SIZE
CREATURE_GFX_OFFSET				EQU		CREATURE_STAT_TEMPLATE_SIZE+CREATURE_FLAV_TEMPLATE_SIZE+CREATURE_CMD_TEMPLATE_SIZE
CREATURE_CARD_OFFSET			EQU  	CREATURE_STAT_TEMPLATE_SIZE+CREATURE_FLAV_TEMPLATE_SIZE+CREATURE_CMD_TEMPLATE_SIZE,CREATURE_GFX_TEMPLATE_SIZE
;-------------------------------------------

BATTLE_PAL_NAROOM				EQU		0
BATTLE_PAL_CALD					EQU		1
BATTLE_PAL_CORE					EQU		1
BATTLE_PAL_OROTHE				EQU		2
BATTLE_PAL_UNDERNEATH			EQU		3
BATTLE_PAL_ARDERIAL				EQU		3




;-------------------------------------------
; arena table -- we don't have bg/pal/bitmap data for cardscene
ARENA_GFX_TEMPLATE_SIZE			EQU		19	
;-------------------------------------------
ARENA_GFX_OFFSET				EQU		0	
ARENA_COLOR_OFFSET				EQU		ARENA_GFX_OFFSET+17

;***********************************
; CREATURE BATTLE STRUCTURE OFFSETS
;***********************************
CREATURE_TEAM			EQU	00
CREATURE_COUNTER		EQU	01
CREATURE_XRAM_OFFSET 	EQU	02
CREATURE_ID			EQU		00+CREATURE_XRAM_OFFSET
CREATURE_TYPE		EQU		01+CREATURE_XRAM_OFFSET
CREATURE_LVL		EQU		02+CREATURE_XRAM_OFFSET
CREATURE_EXPH		EQU		03+CREATURE_XRAM_OFFSET
CREATURE_EXPL		EQU		04+CREATURE_XRAM_OFFSET

CREATURE_ENGH		EQU		05+CREATURE_XRAM_OFFSET
CREATURE_ENGL		EQU		06+CREATURE_XRAM_OFFSET
CREATURE_ENGMAXH	EQU		07+CREATURE_XRAM_OFFSET
CREATURE_ENGMAXL	EQU		08+CREATURE_XRAM_OFFSET
;*******************************************************************
; NOTE:   i rearranged these stats to match the level up stats
CREATURE_STR		EQU		09+CREATURE_XRAM_OFFSET		
CREATURE_SKILL	EQU		10+CREATURE_XRAM_OFFSET		; special attack
CREATURE_SPEED		EQU		11+CREATURE_XRAM_OFFSET
CREATURE_DEF		EQU		12+CREATURE_XRAM_OFFSET
CREATURE_RESIST	EQU		13+CREATURE_XRAM_OFFSET		; special defense
CREATURE_TYPE2      EQU     14+CREATURE_XRAM_OFFSET
CREATURE_OTHER2     EQU     15+CREATURE_XRAM_OFFSET
;*******************************************************************
CREATURE_LUCK		EQU		16+CREATURE_XRAM_OFFSET
CREATURE_ENERGYUP	EQU		17+CREATURE_XRAM_OFFSET
CREATURE_ELEMSTRONG	EQU		18+CREATURE_XRAM_OFFSET
CREATURE_ELEMWEAK	EQU		19+CREATURE_XRAM_OFFSET
CREATURE_IMMUNE		EQU		20+CREATURE_XRAM_OFFSET		; Immune to status ailments
CREATURE_STATUS		EQU		21+CREATURE_XRAM_OFFSET		; Battle status of creature (reset at start)
CREATURE_PERMSTAT	EQU		22+CREATURE_XRAM_OFFSET		; Always have status ailments
CREATURE_AI			EQU		23+CREATURE_XRAM_OFFSET

CREATURE_CMD0		EQU		24+CREATURE_XRAM_OFFSET
CREATURE_CMD1		EQU		26+CREATURE_XRAM_OFFSET
CREATURE_CMD2		EQU		28+CREATURE_XRAM_OFFSET
CREATURE_CMD3		EQU		30+CREATURE_XRAM_OFFSET

CREATURE_CMD0LVL	EQU		32+CREATURE_XRAM_OFFSET
CREATURE_CMD1LVL	EQU		33+CREATURE_XRAM_OFFSET
CREATURE_CMD2LVL	EQU		34+CREATURE_XRAM_OFFSET
CREATURE_CMD3LVL	EQU		35+CREATURE_XRAM_OFFSET
; Equipped by player
CREATURE_RELIC0		EQU		36+CREATURE_XRAM_OFFSET		; OFFSET INTO RELIC TABLE
CREATURE_RELIC1		EQU		37+CREATURE_XRAM_OFFSET
CREATURE_OTHER		EQU		38+CREATURE_XRAM_OFFSET
;********************************
;CMD SECTION
CREATURE_BTLCMD_OFFSET	EQU	CREATURE_OTHER+01
CREATURE_FUNC_PTR	EQU		00+CREATURE_BTLCMD_OFFSET
CREATURE_COST		EQU		02+CREATURE_BTLCMD_OFFSET
CREATURE_TARGET		EQU		03+CREATURE_BTLCMD_OFFSET
CREATURE_MENU		EQU		04+CREATURE_BTLCMD_OFFSET
CREATURE_RATING		EQU		05+CREATURE_BTLCMD_OFFSET
CREATURE_CMDELEM	EQU		06+CREATURE_BTLCMD_OFFSET
CREATURE_DAMAGE		EQU		07+CREATURE_BTLCMD_OFFSET
CREATURE_SUMMON		EQU		07+CREATURE_BTLCMD_OFFSET
CREATURE_ITEM		EQU		07+CREATURE_BTLCMD_OFFSET
CREATURE_CHANCE		EQU		08+CREATURE_BTLCMD_OFFSET
CREATURE_NAME		EQU		09+CREATURE_BTLCMD_OFFSET


;********************************
; CREATURE LEVELUP DEFINES
;********************************
CMD_ALREADY_LEARNED			EQU		$FF
EXP_PER_CREATURE_LEVELUP	EQU		100
NUM_OF_LEVELUP_STATS		EQU		5
MAX_CREATURE_EXP_LEVEL		EQU		99

MAX_ENERGY_STAT_BOUNDARY	EQU		250
	IF 0
MAX_STR_STAT_BOUNDARY	EQU		200
MAX_SKILL_STAT_BOUNDARY	EQU		200
MAX_SPEED_STAT_BOUNDARY		EQU		200
MAX_DEFENSE_STAT_BOUNDARY	EQU		200
MAX_RESIST_STAT_BOUNDARY	EQU		200
	ELSE
MAX_STR_STAT_BOUNDARY	EQU		99
MAX_SKILL_STAT_BOUNDARY	EQU		99
MAX_SPEED_STAT_BOUNDARY		EQU		99
MAX_DEFENSE_STAT_BOUNDARY	EQU		99
MAX_RESIST_STAT_BOUNDARY	EQU		99
MAX_NORMAL_STAT_BOUNDRARY	EQU		99
	ENDIF
MAX_LUCK_STAT_BOUNDARY		EQU		99

CREATURE_TYPE_SMALL			EQU		0
CREATURE_TYPE_MED			EQU		2
CREATURE_TYPE_LARGE			EQU		4
CREATURE_TYPE_WEAK			EQU		6
CREATURE_TYPE_BEATDOWN		EQU		8
CREATURE_TYPE_MAGI			EQU		%11111111 ; Highly (?) unlikely that we ever have a creature with max EN and SPD scaling so surely this is ok? haha
CREATURE_TYPE_RNDMAGI		EQU		14

; These are pretty silly but theyre more readable than binary expressions...
SPD_1_8							EQU   %00000000
SPD_2_8							EQU   %00010000
SPD_3_8							EQU   %00100000
SPD_4_8							EQU   %00110000
SPD_5_8							EQU   %01000000
SPD_6_8							EQU   %01010000
SPD_7_8							EQU   %01100000
SPD_8_8							EQU   %01110000
SPD_9_8							EQU   %10000000
SPD_10_8						EQU   %10010000
SPD_11_8						EQU   %10100000
SPD_12_8						EQU   %10110000
SPD_13_8						EQU   %11000000
SPD_14_8						EQU   %11010000
SPD_15_8						EQU   %11100000
SPD_16_8						EQU   %11110000

ENR_8_8							EQU   %00000000
ENR_10_8						EQU   %00000001
ENR_12_8						EQU   %00000010
ENR_14_8						EQU   %00000011
ENR_16_8						EQU   %00000100
ENR_18_8						EQU   %00000101
ENR_20_8						EQU   %00000110
ENR_22_8						EQU   %00000111
ENR_24_8						EQU   %00001000
ENR_26_8						EQU   %00001001
ENR_28_8						EQU   %00001010
ENR_30_8						EQU   %00001011
ENR_32_8						EQU   %00001100
ENR_34_8						EQU   %00001101
ENR_36_8						EQU   %00001110
ENR_38_8						EQU   %00001111

DEF_1_8							EQU   %00000000
DEF_2_8							EQU   %00010000
DEF_3_8							EQU   %00100000
DEF_4_8							EQU   %00110000
DEF_5_8							EQU   %01000000
DEF_6_8							EQU   %01010000
DEF_7_8							EQU   %01100000
DEF_8_8							EQU   %01110000
DEF_9_8							EQU   %10000000
DEF_10_8						EQU   %10010000
DEF_11_8						EQU   %10100000
DEF_12_8						EQU   %10110000
DEF_13_8						EQU   %11000000
DEF_14_8						EQU   %11010000
DEF_15_8						EQU   %11100000
DEF_16_8						EQU   %11110000

RES_1_8							EQU   %00000000
RES_2_8							EQU   %00000001
RES_3_8							EQU   %00000010
RES_4_8							EQU   %00000011
RES_5_8							EQU   %00000100
RES_6_8							EQU   %00000101
RES_7_8							EQU   %00000110
RES_8_8							EQU   %00000111
RES_9_8							EQU   %00001000
RES_10_8						EQU   %00001001
RES_11_8						EQU   %00001010
RES_12_8						EQU   %00001011
RES_13_8						EQU   %00001100
RES_14_8						EQU   %00001101
RES_15_8						EQU   %00001110
RES_16_8						EQU   %00001111

STR_1_8							EQU   %00000000
STR_2_8							EQU   %00010000
STR_3_8							EQU   %00100000
STR_4_8							EQU   %00110000
STR_5_8							EQU   %01000000
STR_6_8							EQU   %01010000
STR_7_8							EQU   %01100000
STR_8_8							EQU   %01110000
STR_9_8							EQU   %10000000
STR_10_8						EQU   %10010000
STR_11_8						EQU   %10100000
STR_12_8						EQU   %10110000
STR_13_8						EQU   %11000000
STR_14_8						EQU   %11010000
STR_15_8						EQU   %11100000
STR_16_8						EQU   %11110000

SKL_1_8							EQU   %00000000
SKL_2_8							EQU   %00000001
SKL_3_8							EQU   %00000010
SKL_4_8							EQU   %00000011
SKL_5_8							EQU   %00000100
SKL_6_8							EQU   %00000101
SKL_7_8							EQU   %00000110
SKL_8_8							EQU   %00000111
SKL_9_8							EQU   %00001000
SKL_10_8						EQU   %00001001
SKL_11_8						EQU   %00001010
SKL_12_8						EQU   %00001011
SKL_13_8						EQU   %00001100
SKL_14_8						EQU   %00001101
SKL_15_8						EQU   %00001110
SKL_16_8						EQU   %00001111

;********************************
; MAGI LEVELUP DEFINES
;********************************
MAX_ENERGY_MAGI_BOUNDARY	EQU		999
EXP_PER_MAGI_LEVELUP		EQU		100
MAX_MAGI_EXP_LEVEL			EQU		99
MAGI_EXP_LEVEL_ZONE1		EQU		32
MAGI_EXP_LEVEL_ZONE2		EQU		60 

MAGI_ZONE1_ENERGY_INC		EQU		10
MAGI_ZONE2_ENERGY_INC		EQU		16 
MAGI_ZONE3_ENERGY_INC		EQU		01 

;********************************
; XP FORMULA DEFINES
;********************************
TONY_LEVEL_OFFSET			EQU		20
CREATURE_EXP_LEVEL_ZONE1	EQU		30		
CREATURE_EXP_LEVEL_ZONE2	EQU		50
CREATURE_EXP_LEVEL_ZONE3	EQU		62


;********************************
;ARENA TABLE #S
;********************************
ARDERIAL_ARENA1				EQU		$00
ARDGEYSER_ARENA1			EQU		$01
CALD_ARENA1					EQU		$02
CAVERNS_ARENA1				EQU		$03
CLDGEYSER_ARENA1			EQU		$04
CORE_ARENA1					EQU		$05
NAROOM_ARENA1				EQU		$06
NRMGEYSER_ARENA1			EQU		$07
OROGEYSER_ARENA1			EQU		$08
OROGEYSER_ARENA2			EQU		$09
OROTHE_ARENA1				EQU		$0A
OROTUNNEL_ARENA1			EQU		$0B
SHADOWHOLD_ARENA1			EQU		$0C
UNDERNEATH_ARENA1			EQU		$0D

;********************************
;EXP EQUS
;********************************
BTL_EXP_ALLY_HIGHER_1		EQU		3
BTL_EXP_ALLY_HIGHER_2		EQU		5
BTL_EXP_ALLY_HIGHER_3		EQU		7
BTL_EXP_ALLY_HIGHER_4		EQU		12

BTL_EXP_ALLY_LOWER_1		EQU		8
BTL_EXP_ALLY_LOWER_2		EQU		12
BTL_EXP_ALLY_LOWER_3		EQU		18
BTL_EXP_ALLY_LOWER_4		EQU		24

BTL_EXP_ZONE_1				EQU		30
BTL_EXP_ZONE_2				EQU		20
BTL_EXP_ZONE_3				EQU		10
BTL_EXP_ZONE_4				EQU		4
BTL_EXP_ZONE_5				EQU		2
	
;********************************
	END
;********************************
